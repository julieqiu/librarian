# Reference Service Configuration (serviceconfig.yaml)
# Upstream service configuration input.
# Represents the service-level configuration sourced from googleapis/googleapis.
#
# Unified Config Initiative:
# - Absorbs language-neutral settings from BUILD.bazel, GAPIC YAML, and gRPC JSON.
# - This document is consumed, not owned, by Librarian.

type: google.api.Service
config_version: 3
name: example.googleapis.com
title: Example API

# Language-Neutral Settings (Moved from BUILD.bazel/GAPIC YAML)
# These are applicable to all generators.
publishing:
  transports: [grpc, rest]
  rest_numeric_enums: true
  organization: CLOUD
  github_label: "api: example"
  documentation_uri: https://cloud.google.com/example/docs

# apis: Enumerates the public interfaces provided by the service.
apis:
  - name: google.cloud.example.v1.ExampleService

# documentation: Human-readable descriptions used in generated reference material.
documentation:
  summary: An example API for demonstration.

# backend: Defines execution properties. 
# Unified Config: Absorbs retry/timeout from gRPC Service Config JSON.
backend:
  rules:
    - selector: google.cloud.example.v1.ExampleService.*
      deadline: 60.0
      # Retry configuration (Language-neutral)
      retry_policy:
        initial_backoff: 0.100s
        max_backoff: 60s
        backoff_multiplier: 1.3
        retryable_codes: [UNAVAILABLE, DEADLINE_EXCEEDED]

# http: Maps RPCs to REST endpoints.
http:
  rules:
    - selector: google.iam.v1.IAMPolicy.GetIamPolicy
      get: /v1/{resource=projects/*/resources/*}

# authentication: Specifies required OAuth scopes.
authentication:
  rules:
    - selector: google.cloud.example.v1.ExampleService.*
      oauth:
        canonical_scopes: https://www.googleapis.com/auth/cloud-platform

# Language-specific settings remain here for "consumed" reference, 
# but authoritative language overrides move to librarian.yaml.
library_settings:
  - version: google.cloud.example.v1
    java_settings:
      library_package: com.google.cloud.example.v1
    # Long-Running Operations (LRO) configuration
    lro_settings:
      initial_poll_delay: 5s
      poll_delay_multiplier: 1.5
      max_poll_delay: 30s
      total_poll_timeout: 300s
